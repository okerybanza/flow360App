import { PrismaClient, ProjectStatus } from '@prisma/client'

const prisma = new PrismaClient()

async function main() {
  console.log('üèóÔ∏è  Creating construction templates...')

  // Clear existing templates
  await prisma.projectTemplateTask.deleteMany()
  await prisma.projectTemplateStep.deleteMany()
  await prisma.projectTemplate.deleteMany()

  // 1. MAISON INDIVIDUELLE - Template complet
  const maisonTemplate = await prisma.projectTemplate.create({
    data: {
      name: 'Construction Maison Individuelle',
      description: 'Template complet pour la construction d\'une maison individuelle de A √† Z',
    },
  })

  // √âtapes pour Maison Individuelle
  const maisonSteps = await Promise.all([
    prisma.projectTemplateStep.create({
      data: {
        templateId: maisonTemplate.id,
        title: 'Pr√©paration et Terrassement',
        description: 'Pr√©paration du terrain et terrassement',
        order: 1,
      },
    }),
    prisma.projectTemplateStep.create({
      data: {
        templateId: maisonTemplate.id,
        title: 'Fondations',
        description: 'R√©alisation des fondations',
        order: 2,
      },
    }),
    prisma.projectTemplateStep.create({
      data: {
        templateId: maisonTemplate.id,
        title: 'Structure et Ma√ßonnerie',
        description: '√âl√©vation des murs et structure',
        order: 3,
      },
    }),
    prisma.projectTemplateStep.create({
      data: {
        templateId: maisonTemplate.id,
        title: 'Charpente et Couverture',
        description: 'Pose de la charpente et toiture',
        order: 4,
      },
    }),
    prisma.projectTemplateStep.create({
      data: {
        templateId: maisonTemplate.id,
        title: 'Menuiseries Ext√©rieures',
        description: 'Pose des fen√™tres et portes ext√©rieures',
        order: 5,
      },
    }),
    prisma.projectTemplateStep.create({
      data: {
        templateId: maisonTemplate.id,
        title: 'Isolation',
        description: 'Pose des isolants thermiques et phoniques',
        order: 6,
      },
    }),
    prisma.projectTemplateStep.create({
      data: {
        templateId: maisonTemplate.id,
        title: 'Plomberie et √âlectricit√©',
        description: 'Installation des r√©seaux',
        order: 7,
      },
    }),
    prisma.projectTemplateStep.create({
      data: {
        templateId: maisonTemplate.id,
        title: 'Pl√¢trerie et Enduits',
        description: 'Finition des murs et plafonds',
        order: 8,
      },
    }),
    prisma.projectTemplateStep.create({
      data: {
        templateId: maisonTemplate.id,
        title: 'Menuiseries Int√©rieures',
        description: 'Pose des portes int√©rieures et escaliers',
        order: 9,
      },
    }),
    prisma.projectTemplateStep.create({
      data: {
        templateId: maisonTemplate.id,
        title: 'Carrelage et Sols',
        description: 'Pose des rev√™tements de sol',
        order: 10,
      },
    }),
    prisma.projectTemplateStep.create({
      data: {
        templateId: maisonTemplate.id,
        title: 'Peinture et Finitions',
        description: 'Peinture et finitions int√©rieures',
        order: 11,
      },
    }),
    prisma.projectTemplateStep.create({
      data: {
        templateId: maisonTemplate.id,
        title: 'Am√©nagements Ext√©rieurs',
        description: 'Terrassement, all√©es, cl√¥tures',
        order: 12,
      },
    }),
  ])

  // T√¢ches d√©taill√©es pour chaque √©tape
  await Promise.all([
    // Pr√©paration et Terrassement
    prisma.projectTemplateTask.create({
      data: { stepId: maisonSteps[0].id, title: 'D√©limitation du terrain', order: 1 },
    }),
    prisma.projectTemplateTask.create({
      data: { stepId: maisonSteps[0].id, title: 'Abattage des arbres si n√©cessaire', order: 2 },
    }),
    prisma.projectTemplateTask.create({
      data: { stepId: maisonSteps[0].id, title: 'D√©caissement et terrassement', order: 3 },
    }),
    prisma.projectTemplateTask.create({
      data: { stepId: maisonSteps[0].id, title: 'Mise en place des acc√®s chantier', order: 4 },
    }),

    // Fondations
    prisma.projectTemplateTask.create({
      data: { stepId: maisonSteps[1].id, title: 'Implantation et piquetage', order: 1 },
    }),
    prisma.projectTemplateTask.create({
      data: { stepId: maisonSteps[1].id, title: 'Fouilles en rigoles', order: 2 },
    }),
    prisma.projectTemplateTask.create({
      data: { stepId: maisonSteps[1].id, title: 'Pose du film g√©otextile', order: 3 },
    }),
    prisma.projectTemplateTask.create({
      data: { stepId: maisonSteps[1].id, title: 'Mise en place du h√©risson', order: 4 },
    }),
    prisma.projectTemplateTask.create({
      data: { stepId: maisonSteps[1].id, title: 'Coulage des semelles filantes', order: 5 },
    }),
    prisma.projectTemplateTask.create({
      data: { stepId: maisonSteps[1].id, title: 'Pose des longrines', order: 6 },
    }),

    // Structure et Ma√ßonnerie
    prisma.projectTemplateTask.create({
      data: { stepId: maisonSteps[2].id, title: '√âl√©vation des murs de soubassement', order: 1 },
    }),
    prisma.projectTemplateTask.create({
      data: { stepId: maisonSteps[2].id, title: 'Pose du plancher bas', order: 2 },
    }),
    prisma.projectTemplateTask.create({
      data: { stepId: maisonSteps[2].id, title: '√âl√©vation des murs porteurs', order: 3 },
    }),
    prisma.projectTemplateTask.create({
      data: { stepId: maisonSteps[2].id, title: 'Pose des linteaux', order: 4 },
    }),
    prisma.projectTemplateTask.create({
      data: { stepId: maisonSteps[2].id, title: 'Pose du plancher haut', order: 5 },
    }),

    // Charpente et Couverture
    prisma.projectTemplateTask.create({
      data: { stepId: maisonSteps[3].id, title: 'Pose de la charpente', order: 1 },
    }),
    prisma.projectTemplateTask.create({
      data: { stepId: maisonSteps[3].id, title: 'Pose des liteaux', order: 2 },
    }),
    prisma.projectTemplateTask.create({
      data: { stepId: maisonSteps[3].id, title: 'Pose des tuiles', order: 3 },
    }),
    prisma.projectTemplateTask.create({
      data: { stepId: maisonSteps[3].id, title: 'Pose de la zinguerie', order: 4 },
    }),
    prisma.projectTemplateTask.create({
      data: { stepId: maisonSteps[3].id, title: 'Installation des ch√©neaux', order: 5 },
    }),

    // Menuiseries Ext√©rieures
    prisma.projectTemplateTask.create({
      data: { stepId: maisonSteps[4].id, title: 'Pose des fen√™tres', order: 1 },
    }),
    prisma.projectTemplateTask.create({
      data: { stepId: maisonSteps[4].id, title: 'Pose de la porte d\'entr√©e', order: 2 },
    }),
    prisma.projectTemplateTask.create({
      data: { stepId: maisonSteps[4].id, title: 'Pose de la porte de garage', order: 3 },
    }),
    prisma.projectTemplateTask.create({
      data: { stepId: maisonSteps[4].id, title: 'Pose des volets roulants', order: 4 },
    }),

    // Isolation
    prisma.projectTemplateTask.create({
      data: { stepId: maisonSteps[5].id, title: 'Isolation des murs ext√©rieurs', order: 1 },
    }),
    prisma.projectTemplateTask.create({
      data: { stepId: maisonSteps[5].id, title: 'Isolation de la toiture', order: 2 },
    }),
    prisma.projectTemplateTask.create({
      data: { stepId: maisonSteps[5].id, title: 'Isolation des planchers', order: 3 },
    }),
    prisma.projectTemplateTask.create({
      data: { stepId: maisonSteps[5].id, title: 'Pose du pare-vapeur', order: 4 },
    }),

    // Plomberie et √âlectricit√©
    prisma.projectTemplateTask.create({
      data: { stepId: maisonSteps[6].id, title: 'Installation √©lectrique', order: 1 },
    }),
    prisma.projectTemplateTask.create({
      data: { stepId: maisonSteps[6].id, title: 'Installation plomberie', order: 2 },
    }),
    prisma.projectTemplateTask.create({
      data: { stepId: maisonSteps[6].id, title: 'Installation chauffage', order: 3 },
    }),
    prisma.projectTemplateTask.create({
      data: { stepId: maisonSteps[6].id, title: 'Installation VMC', order: 4 },
    }),

    // Pl√¢trerie et Enduits
    prisma.projectTemplateTask.create({
      data: { stepId: maisonSteps[7].id, title: 'Pose des cloisons', order: 1 },
    }),
    prisma.projectTemplateTask.create({
      data: { stepId: maisonSteps[7].id, title: 'Enduits int√©rieurs', order: 2 },
    }),
    prisma.projectTemplateTask.create({
      data: { stepId: maisonSteps[7].id, title: 'Pose des plafonds', order: 3 },
    }),

    // Menuiseries Int√©rieures
    prisma.projectTemplateTask.create({
      data: { stepId: maisonSteps[8].id, title: 'Pose des portes int√©rieures', order: 1 },
    }),
    prisma.projectTemplateTask.create({
      data: { stepId: maisonSteps[8].id, title: 'Pose de l\'escalier', order: 2 },
    }),
    prisma.projectTemplateTask.create({
      data: { stepId: maisonSteps[8].id, title: 'Pose des plinthes', order: 3 },
    }),

    // Carrelage et Sols
    prisma.projectTemplateTask.create({
      data: { stepId: maisonSteps[9].id, title: 'Carrelage salle de bain', order: 1 },
    }),
    prisma.projectTemplateTask.create({
      data: { stepId: maisonSteps[9].id, title: 'Carrelage cuisine', order: 2 },
    }),
    prisma.projectTemplateTask.create({
      data: { stepId: maisonSteps[9].id, title: 'Pose parquet/sols souples', order: 3 },
    }),

    // Peinture et Finitions
    prisma.projectTemplateTask.create({
      data: { stepId: maisonSteps[10].id, title: 'Peinture plafonds', order: 1 },
    }),
    prisma.projectTemplateTask.create({
      data: { stepId: maisonSteps[10].id, title: 'Peinture murs', order: 2 },
    }),
    prisma.projectTemplateTask.create({
      data: { stepId: maisonSteps[10].id, title: 'Peinture menuiseries', order: 3 },
    }),

    // Am√©nagements Ext√©rieurs
    prisma.projectTemplateTask.create({
      data: { stepId: maisonSteps[11].id, title: 'Terrassement ext√©rieur', order: 1 },
    }),
    prisma.projectTemplateTask.create({
      data: { stepId: maisonSteps[11].id, title: 'Pose des all√©es', order: 2 },
    }),
    prisma.projectTemplateTask.create({
      data: { stepId: maisonSteps[11].id, title: 'Installation cl√¥ture', order: 3 },
    }),
  ])

  // 2. R√âNOVATION COMPL√àTE
  const renovationTemplate = await prisma.projectTemplate.create({
    data: {
      name: 'R√©novation Compl√®te',
      description: 'Template pour r√©novation compl√®te d\'un b√¢timent existant',
    },
  })

  const renovationSteps = await Promise.all([
    prisma.projectTemplateStep.create({
      data: {
        templateId: renovationTemplate.id,
        title: 'Diagnostic et D√©samiantage',
        description: 'Analyse du b√¢timent et d√©samiantage si n√©cessaire',
        order: 1,
      },
    }),
    prisma.projectTemplateStep.create({
      data: {
        templateId: renovationTemplate.id,
        title: 'D√©molition',
        description: 'D√©molition des √©l√©ments √† remplacer',
        order: 2,
      },
    }),
    prisma.projectTemplateStep.create({
      data: {
        templateId: renovationTemplate.id,
        title: 'Renforcement Structure',
        description: 'Renforcement de la structure si n√©cessaire',
        order: 3,
      },
    }),
    prisma.projectTemplateStep.create({
      data: {
        templateId: renovationTemplate.id,
        title: 'Isolation Thermique',
        description: 'Mise aux normes thermiques',
        order: 4,
      },
    }),
    prisma.projectTemplateStep.create({
      data: {
        templateId: renovationTemplate.id,
        title: 'Menuiseries',
        description: 'Remplacement des menuiseries',
        order: 5,
      },
    }),
    prisma.projectTemplateStep.create({
      data: {
        templateId: renovationTemplate.id,
        title: 'Installations',
        description: 'Mise aux normes des installations',
        order: 6,
      },
    }),
    prisma.projectTemplateStep.create({
      data: {
        templateId: renovationTemplate.id,
        title: 'Finitions',
        description: 'Finitions int√©rieures',
        order: 7,
      },
    }),
  ])

  // 3. EXTENSION MAISON
  const extensionTemplate = await prisma.projectTemplate.create({
    data: {
      name: 'Extension Maison',
      description: 'Template pour extension d\'une maison existante',
    },
  })

  const extensionSteps = await Promise.all([
    prisma.projectTemplateStep.create({
      data: {
        templateId: extensionTemplate.id,
        title: 'Pr√©paration',
        description: 'Pr√©paration du chantier et raccordements',
        order: 1,
      },
    }),
    prisma.projectTemplateStep.create({
      data: {
        templateId: extensionTemplate.id,
        title: 'Fondations Extension',
        description: 'R√©alisation des fondations de l\'extension',
        order: 2,
      },
    }),
    prisma.projectTemplateStep.create({
      data: {
        templateId: extensionTemplate.id,
        title: 'Structure Extension',
        description: 'Construction de la structure de l\'extension',
        order: 3,
      },
    }),
    prisma.projectTemplateStep.create({
      data: {
        templateId: extensionTemplate.id,
        title: 'Raccordement',
        description: 'Raccordement √† l\'existant',
        order: 4,
      },
    }),
    prisma.projectTemplateStep.create({
      data: {
        templateId: extensionTemplate.id,
        title: 'Finitions Extension',
        description: 'Finitions de l\'extension',
        order: 5,
      },
    }),
  ])

  // 4. B√ÇTIMENT COMMERCIAL
  const commercialTemplate = await prisma.projectTemplate.create({
    data: {
      name: 'B√¢timent Commercial',
      description: 'Template pour construction de b√¢timent commercial',
    },
  })

  const commercialSteps = await Promise.all([
    prisma.projectTemplateStep.create({
      data: {
        templateId: commercialTemplate.id,
        title: 'Terrassement',
        description: 'Terrassement et fondations',
        order: 1,
      },
    }),
    prisma.projectTemplateStep.create({
      data: {
        templateId: commercialTemplate.id,
        title: 'Structure',
        description: 'Structure b√©ton arm√©',
        order: 2,
      },
    }),
    prisma.projectTemplateStep.create({
      data: {
        templateId: commercialTemplate.id,
        title: 'Fa√ßades',
        description: 'Pose des fa√ßades',
        order: 3,
      },
    }),
    prisma.projectTemplateStep.create({
      data: {
        templateId: commercialTemplate.id,
        title: 'Toiture',
        description: 'Pose de la toiture',
        order: 4,
      },
    }),
    prisma.projectTemplateStep.create({
      data: {
        templateId: commercialTemplate.id,
        title: 'Installations',
        description: 'Installations techniques',
        order: 5,
      },
    }),
    prisma.projectTemplateStep.create({
      data: {
        templateId: commercialTemplate.id,
        title: 'Am√©nagements',
        description: 'Am√©nagements int√©rieurs',
        order: 6,
      },
    }),
  ])

  // 5. R√âNOVATION √âNERG√âTIQUE
  const energetiqueTemplate = await prisma.projectTemplate.create({
    data: {
      name: 'R√©novation √ânerg√©tique',
      description: 'Template pour r√©novation √©nerg√©tique',
    },
  })

  const energetiqueSteps = await Promise.all([
    prisma.projectTemplateStep.create({
      data: {
        templateId: energetiqueTemplate.id,
        title: 'Audit √ânerg√©tique',
        description: 'Diagnostic de performance √©nerg√©tique',
        order: 1,
      },
    }),
    prisma.projectTemplateStep.create({
      data: {
        templateId: energetiqueTemplate.id,
        title: 'Isolation Toiture',
        description: 'Isolation de la toiture',
        order: 2,
      },
    }),
    prisma.projectTemplateStep.create({
      data: {
        templateId: energetiqueTemplate.id,
        title: 'Isolation Murs',
        description: 'Isolation des murs ext√©rieurs',
        order: 3,
      },
    }),
    prisma.projectTemplateStep.create({
      data: {
        templateId: energetiqueTemplate.id,
        title: 'Menuiseries',
        description: 'Remplacement des menuiseries',
        order: 4,
      },
    }),
    prisma.projectTemplateStep.create({
      data: {
        templateId: energetiqueTemplate.id,
        title: 'Chauffage',
        description: 'Remplacement du syst√®me de chauffage',
        order: 5,
      },
    }),
    prisma.projectTemplateStep.create({
      data: {
        templateId: energetiqueTemplate.id,
        title: 'Ventilation',
        description: 'Installation VMC double flux',
        order: 6,
      },
    }),
  ])

  console.log('‚úÖ Construction templates created successfully!')
  console.log(`üìã Created ${5} templates:`)
  console.log('  - Construction Maison Individuelle (12 √©tapes)')
  console.log('  - R√©novation Compl√®te (7 √©tapes)')
  console.log('  - Extension Maison (5 √©tapes)')
  console.log('  - B√¢timent Commercial (6 √©tapes)')
  console.log('  - R√©novation √ânerg√©tique (6 √©tapes)')
}

main()
  .catch((e) => {
    console.error(e)
    process.exit(1)
  })
  .finally(async () => {
    await prisma.$disconnect()
  })
